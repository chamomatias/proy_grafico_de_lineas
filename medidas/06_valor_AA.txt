06_valor_AA = 
VAR fecha_actual =
    // Fecha visible en el contexto actual (no se usa en el cálculo,
    // pero puede servir para depuración o lecturas futuras).
    SELECTEDVALUE ( '01_dim_calendario'[fecha] )
VAR valor_prev_period =
    // Calcula [01_valor] desplazando el contexto de fecha un año hacia atrás.
    CALCULATE (
        [01_valor],                                // <<––– MEDIDA DE REFERENCIA
        DATEADD ( '01_dim_calendario'[fecha], -1, YEAR )
    )
VAR tiene_valor_prev_period =
    // Verifica si en el mismo período del año anterior existe un valor válido.
    CALCULATE (
        [00_FechasConValor],
        DATEADD ( '01_dim_calendario'[fecha], -1, YEAR )
    )
RETURN
    // Devuelve el valor del período anterior solo si ese período tenía datos;
    // de lo contrario, muestra BLANK() para evitar comparaciones incorrectas.
    IF ( tiene_valor_prev_period, valor_prev_period )
